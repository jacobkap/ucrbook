# Law Enforcement Officers Killed and Assaulted (LEOKA) {#leoka}

```{r, echo=FALSE}
knitr::opts_chunk$set(
  echo    = FALSE,
  warning = FALSE,
  error   = FALSE,
  message = FALSE
)
```

```{r, echo = FALSE, message=FALSE, results='hide'}
load("data/leoka_yearly_1960_2018.rda")
```

The Law Enforcement Officers Killed and Assaulted data, often called just by its acronym LEOKA, has two main purposes.^[This data is also sometimes called the "Police Employees" dataset.] First, it provides counts of employees employed by each agency - broken down by if they are civilian employees or sworn officers, and also broken down by gender. And second, it measures how many officers were assaulted or killed (including officers who die accidentally such as in a car crash) in a given month. The assault data is also broken down into shift type and type (e.g. alone, with a partner, on foot, in a car, etc.), the offender's weapon, and type of call they are responding to (e.g. robbery, disturbance, traffic stop). The killed data simply says how many officers are killed feloniously (i.e. murdered) or died accidentally (e.g. car crash) in a given month. The employee information is at the year-level so you know, for example, how many male police officers were employed in a given year at an agency, but don't know any more than that such as how many officers were on patrol, were detectives, were in special units, etc. This dataset is commonly used as a measure of police employees and is a generally reliable - though imperfect as we'll see - measure of how many police are employed by a police agency.  The second part of this data, measuring assaults and deaths,  is more flawed with missing data issues and data error issues (e.g. more officers killed than employed in an agency). 

## Agencies reporting

## Important variables

### Number of employees 

* Female employees
    + Officers
    + Civilians
* Male employees
    + Officers
    + Civilians
    
### Patrol shifts

* One officer vehicle patrol
    + Day shift
    + Evening shift
    + Night shift
    + Other shift
    + Total shifts - sum of above
* Two officer vehicle patrol
    + Day shift
    + Evening shift
    + Night shift
    + Other shift
    + Total shifts - sum of above
* One officer foot patrol
    + Day shift
    + Evening shift
    + Night shift
    + Other shift
    + Total shifts - sum of above
* Two officer foot patrol
    + Day shift
    + Evening shift
    + Night shift
    + Other shift
    + Total shifts - sum of above
* Other patrols
    + Day shift
    + Evening shift
    + Night shift
    + Other shift
    + Total shifts - sum of above
* Total patrols
    + Day shift
    + Evening shift
    + Night shift
    + Other shift
    + Total shifts - sum of above


### Officers killed

### Assaults by injury and weapon

* Assaults with injury
    + Offender has firearm
    + Offender had knife
    + Offender had other weapon
    + Offender was unarmed
* Assaults without injury
    + Offender has firearm
    + Offender had knife
    + Offender had other weapon
    + Offender was unarmed

### Assaults by call type

* Disturbance call (e.g. domestic violence, person carrying a gun in public)
* Burglary
* Robbery
* Officers arresting someone for another crime
* Civil disorder
* Officer has custody of prisoners
* Suspicious persons
* Officers are ambushed
* Mentally deranged person
* Traffic pursuit and traffic stops
* All other call types
* Total - sum of all call types


* Offender weapons
    + Offender has firearm
    + Offender had knife
    + Offender had other weapon
    + Offender was unarmed
* Type of officer assignment
    + In a vehicle with two officers
    + In a vehicle alone
    + In a vehicle alone but assisted by other officers
    + Detective or special unit alone
    + Detective or special unit assisted by other officers
    + Other assignment alone
    + Other assignment assisted by other officers
* Number of assaults on police cleared
    
### Assaults by time

* 12:01am - 2:00am
* 2:01am  - 4:00am
* 4:01am  - 6:00am
* 6:01am  - 8:00am
* 8:01am  - 10:00am
* 10:01am - 12:00pm
* 12:01pm - 2:00pm
* 2:01pm  - 4:00pm
* 4:01pm  - 6:00pm
* 6:01pm  - 8:00pm
* 8:01pm  - 10:00pm
* 10:01pm - 12:00am

```{r phoenixAssaultTimes, fig.cap = "The number of assaults against Phoenix Police Department officers by hourly grouping for all years with data available, 1971-2018."}
time <- leoka_yearly_1960_2018 %>%
  filter(ori %in% "AZ00723") %>%
  mutate(dummy = 1) %>%
  select(dummy,
         time_of_assault_0001_to_0200, 
         time_of_assault_0201_to_0400,
         time_of_assault_0401_to_0600,
         time_of_assault_0601_to_0800,
         time_of_assault_0801_to_1000,
         time_of_assault_1001_to_1200,
         time_of_assault_1201_to_1400,
         time_of_assault_1401_to_1600,
         time_of_assault_1601_to_1800,
         time_of_assault_1801_to_2000,
         time_of_assault_2001_to_2200,
         time_of_assault_2201_to_0000) %>%
  group_by(dummy) %>%
  summarize_all(sum)

time$dummy <- NULL
time <- t(time)
time <- data.frame(time)
time$hour <- rownames(time)
rownames(time) <- NULL
time$hour <- gsub("time_of_assault_", "", time$hour)
names(time)[1] <- "assaults"
time$hour <- gsub("([0-9]{2})([0-9]{2})", "\\1:\\2", time$hour)
time$hour <- gsub("_to_", "-", time$hour)
time$hour <- gsub("00:00", "24:00", time$hour)
time$hour <- factor(time$hour, levels = rev(time$hour))

ggplot(time, aes(x = assaults, y = hour)) +
  geom_col(width    = 0.5,    
           position = position_dodge(0.5)) +
  xlab("# of Assaults") +
  ylab("Time") +
  expand_limits(x = 0) + 
  theme_crim() +
  scale_x_continuous(labels = scales::comma)

```

