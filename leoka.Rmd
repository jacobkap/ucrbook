# Law Enforcement Officers Killed and Assaulted (LEOKA) {#leoka}

```{r, echo=FALSE}
knitr::opts_chunk$set(
  echo    = FALSE,
  warning = FALSE,
  error   = FALSE,
  message = FALSE
)
```

```{r, echo = FALSE, message=FALSE, results='hide'}
load("data/leoka_yearly_1960_2018.rda")
```

The Law Enforcement Officers Killed and Assaulted data, often called just by its acronym LEOKA, has two main purposes.^[This data is also sometimes called the "Police Employees" dataset.] First, it provides counts of employees employed by each agency - broken down by if they are civilian employees or sworn officers, and also broken down by gender. And second, it measures how many officers were assaulted or killed (including officers who die accidentally such as in a car crash) in a given month. The assault data is also broken down into shift type and type (e.g. alone, with a partner, on foot, in a car, etc.), the offender's weapon, and type of call they are responding to (e.g. robbery, disturbance, traffic stop). The killed data simply says how many officers are killed feloniously (i.e. murdered) or died accidentally (e.g. car crash) in a given month. The employee information is at the year-level so you know, for example, how many male police officers were employed in a given year at an agency, but don't know any more than that such as how many officers were on patrol, were detectives, were in special units, etc. This dataset is commonly used as a measure of police employees and is a generally reliable - though imperfect as we'll see - measure of how many police are employed by a police agency.  The second part of this data, measuring assaults and deaths,  is more flawed with missing data issues and data error issues (e.g. more officers killed than employed in an agency). 

## Agencies reporting

```{r leokaAgencies, fig.cap = "The annual number of police agencies that report at least month of data that year, 1960-2018"}
leoka_yearly_1960_2018 %>%
  dplyr::filter(number_of_months_reported > 0) %>%
  dplyr::distinct(ori, year, .keep_all = TRUE) %>%
  count(year) %>%
  ggplot(aes(x = year, y = n)) +
  geom_line(size = 1.05) +
  xlab("Year") +
  ylab("# of Agencies") +
  theme_crim() +
  scale_y_continuous(labels = scales::comma) +
  expand_limits(y = 0)
```

```{r leokaAgencies12Months, fig.cap = "The annual number of police agencies that report all 12 months of data that year, 1960-2018"}
leoka_yearly_1960_2018 %>%
  dplyr::filter(number_of_months_reported %in% 12) %>%
  dplyr::distinct(ori, year, .keep_all = TRUE) %>%
  count(year) %>%
  ggplot(aes(x = year, y = n)) +
  geom_line(size = 1.05) +
  xlab("Year") +
  ylab("# of Agencies") +
  theme_crim() +
  scale_y_continuous(labels = scales::comma) +
  expand_limits(y = 0)
```

## Important variables

### Number of employees 
 
* Female employees
    + Officers
    + Civilians
* Male employees
    + Officers
    + Civilians
    
```{r leokaCivilianOfficers, fig.cap = "The number of civilian employees and sworn officers in Philadelphia, 1960-2018"}
leoka_yearly_1960_2018 %>%
  dplyr::filter(ori %in% "PAPEP00") %>%
  ggplot(aes(x = year, y = total_employees_officers, color = "Officers")) +
  geom_line(size = 1.05) +
  geom_line(aes(y = total_employees_civilians, color = "Civilians"), size = 1.05) +
  xlab("Year") +
  ylab("# of Employees") +
  theme_crim() +
  scale_y_continuous(labels = scales::comma) +
  expand_limits(y = 0) +
  labs(color = "Employee Type") +
  scale_color_crim()
```

```{r leokaOfficersGender, fig.cap = "The number of female and male sworn officers in Philadelphia, 1960-2018"}
leoka_yearly_1960_2018 %>%
  dplyr::filter(ori %in% "PAPEP00") %>%
  ggplot(aes(x = year, y = female_employees_officers, color = "Female Officers")) +
  geom_line(size = 1.05) +
  geom_line(aes(y = male_employees_officers, color = "Male Officers"), size = 1.05) +
  xlab("Year") +
  ylab("# of Employees") +
  theme_crim() +
  scale_y_continuous(labels = scales::comma) +
  expand_limits(y = 0) +
  labs(color = "") +
  scale_color_crim()
```
    
### Patrol shifts

* One officer vehicle patrol
    + Day shift
    + Evening shift
    + Night shift
    + Other shift
    + Total shifts - sum of above
* Two officer vehicle patrol
    + Day shift
    + Evening shift
    + Night shift
    + Other shift
    + Total shifts - sum of above
* One officer foot patrol
    + Day shift
    + Evening shift
    + Night shift
    + Other shift
    + Total shifts - sum of above
* Two officer foot patrol
    + Day shift
    + Evening shift
    + Night shift
    + Other shift
    + Total shifts - sum of above
* Other patrols
    + Day shift
    + Evening shift
    + Night shift
    + Other shift
    + Total shifts - sum of above
* Total patrols
    + Day shift
    + Evening shift
    + Night shift
    + Other shift
    + Total shifts - sum of above


### Officers killed

There is almost no information about officers killed. The data only breaks this down into if they died "feloniously" which just means that someone killed them on purpose (e.g. shooting them, intentionally hitting them with a car) or if they died "accidentally" such as if they die during a car crash while on duty. The FBI actually collects more information on officer deaths than they release in this data. This includes the circumstances of each death such as the type of death (e.g. car crash, shooting, ambush, etc.), what weapon the offender had if feloniously killed, and even a detailed written summary of what occurred for each officer killed. They post this information in their annual LEOKA report which is part of their Crime in the United States report. The 2019 report, the latest year available, can be found on their site [here](https://ucr.fbi.gov/leoka/2019/home).

```{r leokaOfficersKilled, fig.cap = "The number of officers killed by felony and killed accidentally in Los Angeles, 1960-2018"}
leoka_yearly_1960_2018 %>%
  dplyr::filter(ori %in% "CA01942") %>%
  ggplot(aes(x = year, y = officers_killed_by_felony, color = "Killed by Felony")) +
  geom_line(size = 1.05) +
  geom_line(aes(y = officers_killed_by_accident, color = "Killed accidentally"), size = 1.05) +
  xlab("Year") +
  ylab("# of Officers") +
  theme_crim() +
  scale_y_continuous(labels = scales::comma) +
  expand_limits(y = 0) +
  labs(color = "") +
  scale_color_crim()
```

```{r leokaOfficersKilledNational, fig.cap = "The national number of officers killed by felony and killed accidentally, 1960-2018"}
leoka_yearly_1960_2018 %>%
  group_by(year) %>%
  summarize(officers_killed_by_felony = sum(officers_killed_by_felony, na.rm = TRUE),
            officers_killed_by_accident = sum(officers_killed_by_accident, na.rm = TRUE)) %>%
  ggplot(aes(x = year, y = officers_killed_by_felony, color = "Killed by Felony")) +
  geom_line(size = 1.05) +
  geom_line(aes(y = officers_killed_by_accident, color = "Killed accidentally"), size = 1.05) +
  xlab("Year") +
  ylab("# of Officers") +
  theme_crim() +
  scale_y_continuous(labels = scales::comma) +
  expand_limits(y = 0) +
  labs(color = "") +
  scale_color_crim()
```




### Assaults by injury and weapon

* Assaults with injury
    + Offender has firearm
    + Offender had knife
    + Offender had other weapon
    + Offender was unarmed
* Assaults without injury
    + Offender has firearm
    + Offender had knife
    + Offender had other weapon
    + Offender was unarmed
    
    
```{r leokaAssaultTypeInjury, The total number of assaults on officers by injury sustained and offender weapon in Los Angeles, 1960-2018.}
assault_type <- leoka_yearly_1960_2018 %>%
  filter(ori %in% "CA01942") %>%
  mutate(dummy = 1,
         assaults_total_assaults = assaults_with_injury_total + assaults_no_injury_total) %>%
  select(dummy,
         "assaults_total_assaults",
         "assaults_with_injury_gun",
         "assaults_with_injury_knife",
         "assaults_with_injury_oth_weap",
         "assaults_with_injury_unarmed",
         "assaults_with_injury_total",
         "assaults_no_injury_gun",
         "assaults_no_injury_knife",
         "assaults_no_injury_oth_weap",
         "assaults_no_injury_unarmed",
         "assaults_no_injury_total") %>%
  group_by(dummy) %>%
  summarize_all(sum)

assault_type$dummy <- NULL
assault_type <- t(assault_type)
assault_type <- data.frame(assault_type)
assault_type$type <- rownames(assault_type)
rownames(assault_type) <- NULL
assault_type$type <- gsub("assaults_", "", assault_type$type)
names(assault_type)[1] <- "assaults"
assault_type$type <- gsub("_", " ", assault_type$type)
assault_type$type <- capitalize_words(assault_type$type)
assault_type <- assault_type %>% arrange(desc(assaults))
assault_type$type <- gsub("Injury", "Injury - ", assault_type$type)
assault_type$type <- gsub("Oth Weap", "Other Weapon", assault_type$type)
assault_type$type <- factor(assault_type$type, levels = rev(assault_type$type))


ggplot(assault_type, aes(x = assaults, y = type)) +
  geom_col(width    = 0.5,    
           position = position_dodge(0.5)) +
  xlab("# of Assaults") +
  ylab("Assault Type") +
  expand_limits(x = 0) + 
  theme_crim() +
  scale_x_continuous(labels = scales::comma)

```


```{r leokaAssaultsInjuryYear, fig.cap = "The annual number of assaults on officers by injury sustained in Los Angeles, 1960-2018."}
leoka_yearly_1960_2018 %>%
  filter(ori %in% "CA01942") %>%
  mutate(assaults_total_assaults = assaults_with_injury_total + assaults_no_injury_total) %>%
  group_by(year) %>%
  summarize(assaults_total_assaults = sum(assaults_total_assaults),
         assaults_with_injury_total = sum(assaults_with_injury_total),
         assaults_no_injury_total   = sum(assaults_no_injury_total)) %>%
ggplot(aes(x = year, y = assaults_total_assaults, color = "Total Assaults")) +
  geom_line(size = 1.05) +
  geom_line(aes(y = assaults_with_injury_total, color = "With Injuries"), size = 1.05) +
  geom_line(aes(y = assaults_no_injury_total, color = "No Injuries"), size = 1.05) +
  xlab("Year") +
  ylab("# of Assaults") +
  theme_crim() +
  scale_y_continuous(labels = scales::comma) +
  expand_limits(y = 0) +
  labs(color = "") +
  scale_color_crim()


```


### Assaults by call type

* Disturbance call (e.g. domestic violence, person carrying a gun in public)
* Burglary
* Robbery
* Officers arresting someone for another crime
* Civil disorder
* Officer has custody of prisoners
* Suspicious persons
* Officers are ambushed
* Mentally deranged person
* Traffic pursuit and traffic stops
* All other call types
* Total - sum of all call types

```{r leokaAssaultCallType, fig.cap = "Assaults on Los Angeles Police Department officers by type of call where they were assaulted at, 1960-2018."}
call_type <- leoka_yearly_1960_2018 %>%
  filter(ori %in% "CA01942") %>%
  mutate(dummy = 1) %>%
  select(dummy,
         "ambush_total_assaults",
         "oth_arrest_total_assaults",
         "burglary_total_assaults",
         "deranged_total_assaults",
         "disturbance_total_assaults",
         "prisoner_total_assaults",
         "riot_total_assaults",
         "robbery_total_assaults",
         "susp_pers_total_assaults",
         "traffic_total_assaults",
         "all_other_total_assaults",
         "total_assaults_total",
         "total_assaults_cleared" ) %>%
  group_by(dummy) %>%
  summarize_all(sum)

call_type$dummy <- NULL
call_type <- t(call_type)
call_type <- data.frame(call_type)
call_type$type <- rownames(call_type)
rownames(call_type) <- NULL
call_type$type <- gsub("assaults_", "", call_type$type)
names(call_type)[1] <- "assaults"
call_type$type <- gsub("_", " ", call_type$type)
call_type$type <- capitalize_words(call_type$type)
call_type <- call_type %>% arrange(desc(assaults))
call_type$type <- gsub("Total Assaults", "", call_type$type)
call_type$type <- gsub("Total Total", "Total Assaults", call_type$type)
call_type$type <- gsub("Susp Pers", "Suspicious Person", call_type$type)
call_type$type <- gsub("Oth ", "Other ", call_type$type)
call_type$type <- factor(call_type$type, levels = rev(call_type$type))


ggplot(call_type, aes(x = assaults, y = type)) +
  geom_col(width    = 0.5,    
           position = position_dodge(0.5)) +
  xlab("# of Assaults") +
  ylab("Call Type") +
  expand_limits(x = 0) + 
  theme_crim() +
  scale_x_continuous(labels = scales::comma)

```


* Offender weapons
    + Offender has firearm
    + Offender had knife
    + Offender had other weapon
    + Offender was unarmed
* Type of officer assignment
    + In a vehicle with two officers
    + In a vehicle alone
    + In a vehicle alone but assisted by other officers
    + Detective or special unit alone
    + Detective or special unit assisted by other officers
    + Other assignment alone
    + Other assignment assisted by other officers
* Number of assaults on police cleared

```{r leokaDisturbanceWeapon, fig.cap = "The number of assaults on Los Angeles Police Department officers in distrubance calls by the injury sustained by the officer, 1960-2018."}
call_type <- leoka_yearly_1960_2018 %>%
  filter(ori %in% "CA01942") %>%
  mutate(dummy = 1) %>%
  select(dummy,
         "disturbance_total_assaults",
         "disturbance_assault_gun",
         "disturbance_assault_knife",
         "disturbance_assault_oth_weap",
         "disturbance_assault_unarmed") %>%
  group_by(dummy) %>%
  summarize_all(sum)

call_type$dummy <- NULL
call_type <- t(call_type)
call_type <- data.frame(call_type)
call_type$type <- rownames(call_type)
rownames(call_type) <- NULL
call_type$type <- gsub("disturbance_", "", call_type$type)
names(call_type)[1] <- "assaults"
call_type$type <- gsub("_", " ", call_type$type)
call_type$type <- capitalize_words(call_type$type)
call_type <- call_type %>% arrange(desc(assaults))
call_type$type <- gsub("Susp Pers", "Suspicious Person", call_type$type)
call_type$type <- gsub("Oth Weap", "Other Weapon", call_type$type)
call_type$type <- gsub("Veh", "Vehicle", call_type$type)
call_type$type <- factor(call_type$type, levels = rev(call_type$type))


ggplot(call_type, aes(x = assaults, y = type)) +
  geom_col(width    = 0.5,    
           position = position_dodge(0.5)) +
  xlab("# of Assaults") +
  ylab("Offender Weapon") +
  expand_limits(x = 0) + 
  theme_crim() +
  scale_x_continuous(labels = scales::comma)

```


```{r leokaShiftAssignment, fig.cap = "The number of assaults on Los Angeles Police Department officers in distrubance calls by the injury sustained by the shift assignment of the officer, 1960-2018."}
call_type <- leoka_yearly_1960_2018 %>%
  filter(ori %in% "CA01942") %>%
  mutate(dummy = 1) %>%
  select(dummy,
         "disturbance_total_assaults",
         "disturbance_two_man_veh",
         "disturbance_one_man_alone",
         "disturbance_one_man_assist",
         "disturbance_detective_alone",
         "disturbance_detective_assist",
         "disturbance_other_alone",
         "disturbance_other_assist",
         "disturbance_assaults_cleared") %>%
  group_by(dummy) %>%
  summarize_all(sum)

call_type$dummy <- NULL
call_type <- t(call_type)
call_type <- data.frame(call_type)
call_type$type <- rownames(call_type)
rownames(call_type) <- NULL
call_type$type <- gsub("disturbance_", "", call_type$type)
names(call_type)[1] <- "assaults"
call_type$type <- gsub("_", " ", call_type$type)
call_type$type <- capitalize_words(call_type$type)
call_type <- call_type %>% arrange(desc(assaults))
call_type$type <- gsub("Susp Pers", "Suspicious Person", call_type$type)
call_type$type <- gsub("Oth Weap", "Other Weapon", call_type$type)
call_type$type <- gsub("Veh", "Vehicle", call_type$type)
call_type$type <- factor(call_type$type, levels = rev(call_type$type))


ggplot(call_type, aes(x = assaults, y = type)) +
  geom_col(width    = 0.5,    
           position = position_dodge(0.5)) +
  xlab("# of Assaults") +
  ylab("Offender Weapon") +
  expand_limits(x = 0) + 
  theme_crim() +
  scale_x_continuous(labels = scales::comma)

```

    
### Assaults by time

* 12:01am - 2:00am
* 2:01am  - 4:00am
* 4:01am  - 6:00am
* 6:01am  - 8:00am
* 8:01am  - 10:00am
* 10:01am - 12:00pm
* 12:01pm - 2:00pm
* 2:01pm  - 4:00pm
* 4:01pm  - 6:00pm
* 6:01pm  - 8:00pm
* 8:01pm  - 10:00pm
* 10:01pm - 12:00am

```{r phoenixAssaultTimes, fig.cap = "The number of assaults against Phoenix Police Department officers by hourly grouping for all years with data available, 1971-2018."}
time <- leoka_yearly_1960_2018 %>%
  filter(ori %in% "AZ00723") %>%
  mutate(dummy = 1) %>%
  select(dummy,
         time_of_assault_0001_to_0200, 
         time_of_assault_0201_to_0400,
         time_of_assault_0401_to_0600,
         time_of_assault_0601_to_0800,
         time_of_assault_0801_to_1000,
         time_of_assault_1001_to_1200,
         time_of_assault_1201_to_1400,
         time_of_assault_1401_to_1600,
         time_of_assault_1601_to_1800,
         time_of_assault_1801_to_2000,
         time_of_assault_2001_to_2200,
         time_of_assault_2201_to_0000) %>%
  group_by(dummy) %>%
  summarize_all(sum)

time$dummy <- NULL
time <- t(time)
time <- data.frame(time)
time$hour <- rownames(time)
rownames(time) <- NULL
time$hour <- gsub("time_of_assault_", "", time$hour)
names(time)[1] <- "assaults"
time$hour <- gsub("([0-9]{2})([0-9]{2})", "\\1:\\2", time$hour)
time$hour <- gsub("_to_", "-", time$hour)
time$hour <- gsub("00:00", "24:00", time$hour)
time$hour <- factor(time$hour, levels = rev(time$hour))

ggplot(time, aes(x = assaults, y = hour)) +
  geom_col(width    = 0.5,    
           position = position_dodge(0.5)) +
  xlab("# of Assaults") +
  ylab("Time") +
  expand_limits(x = 0) + 
  theme_crim() +
  scale_x_continuous(labels = scales::comma)

```

